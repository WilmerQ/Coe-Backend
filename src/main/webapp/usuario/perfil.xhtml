<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      lang="es"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <ui:include src="../css/templates/head_config.xhtml"/>
        <title>Mi Perfil</title>
    </h:head>

    <h:body class="nav-md">

        <div class="container body">
            <div class="main_container">
                <ui:include src="../css/templates/base.xhtml"/>

                <!-- page content -->
                <div class="right_col" role="main">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <span class="section">Mis Datos Personales</span>
                                <div class="x_content">
                                    <h:form role="form"  id="form" class="form-horizontal form-label-left">
                                        <p:growl id="growl" showDetail="true" sticky="true" />
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">ID:<span class="required"></span>
                                            </label>
                                            <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                                <p:outputLabel value="#{mbLoguin.usuario.id}" class="alignleft" style="color: #000"/>
                                            </div>
                                        </div>                                        
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Nombre:<span class="required"></span>
                                            </label>
                                            <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                                <p:outputLabel value="#{mbLoguin.usuario.nombreUsuario}" class="alignleft" style="color: #000"/>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Imagen Perfil:<span class="required"></span>
                                            </label>
                                            <div class="col-md-3 col-sm-3 col-xs-12">
                                                <p:graphicImage id="graf" rendered="#{mbLoguin.usuario.imagenperfil != null}"
                                                                url="http://#{MbDatosBasicos.ip}:8080/coe/imagenperfilservlet?id=#{mbLoguin.usuario.id}"
                                                                style="width: 80px; height:80px" />         
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Correo Electr칩nico:<span class="required">*</span>
                                            </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <p:inputText id="email" type="email" styleClass="form-control col-md-7 col-xs-12" value="#{mbLoguin.usuario.email}" style="color: #000"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Telefono:<span class="required">*</span>
                                            </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <p:inputText id="telefono" type="number" styleClass="form-control col-md-7 col-xs-12" value="#{mbLoguin.usuario.telefono}" style="color: #000"/>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Actualizar Contrase침a:<span class="required"></span>
                                            </label>
                                            <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                                <p:selectBooleanButton id="value1" value="#{mbLoguin.actualzarPass}" onLabel="Si" offLabel="No" style="color: #000; width:60px" class="alignleft">
                                                    <p:ajax update=":form"/>
                                                </p:selectBooleanButton>
                                            </div>
                                        </div>
                                        <ui:fragment rendered="#{mbLoguin.actualzarPass == true}">
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Contrase침a Actual:<span class="required">*</span>
                                                </label>
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    <p:inputText id="actual" type="password" styleClass="form-control col-md-7 col-xs-12" value="#{mbLoguin.passActual}" style="color: #000"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Nueva Contrase침a:<span class="required">*</span>
                                                </label>
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    <p:inputText id="nuevapass" type="password" styleClass="form-control" value="#{mbLoguin.passNueva}" style="color: #000"/>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Confirmar:<span class="required">*</span>
                                                </label>
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    <p:inputText id="confirmarpass" type="password" styleClass="form-control col-md-7 col-xs-12" value="#{mbLoguin.passConfirmar}" style="color: #000"/>
                                                </div>
                                            </div>

                                        </ui:fragment>

                                        <div class="form-group">
                                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Actualizar Imagen perfil:<span class="required"></span>
                                            </label>
                                            <div class="control-label col-md-3 col-sm-3 col-xs-12">
                                                <p:selectBooleanButton id="value2" value="#{mbLoguin.actualizarImagenPerfil}" onLabel="Si" offLabel="No" style="color: #000; width:60px" class="alignleft">
                                                    <p:ajax update=":form"/>
                                                </p:selectBooleanButton>
                                            </div>
                                        </div>

                                        <ui:fragment rendered="#{mbLoguin.actualizarImagenPerfil == true}">
                                            <div class="form-group">
                                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name"><span class="required">*</span>
                                                </label>
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    <p:fileUpload id="upload"
                                                                  fileUploadListener="#{mbLoguin.handleFileUpload}"
                                                                  dragDropSupport="false"  
                                                                  mode="advanced"
                                                                  multiple="false" 
                                                                  auto="true"
                                                                  label="Seleccione Foto Perfil"
                                                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
                                                                  cancelLabel="Cancelar"
                                                                  uploadLabel="Cargar"
                                                                  update=":form">
                                                    </p:fileUpload>
                                                </div>
                                            </div>
                                        </ui:fragment>

                                        <div class="ln_solid"></div>
                                        <div class="form-group" align="center">
                                            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                                <p:commandButton  value="Actualizar" update=":form" styleClass="btn btn-success" actionListener="#{mbLoguin.accionActualizar()}" />    
                                            </div>
                                        </div>
                                    </h:form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>     
            </div>
        </div>
        <ui:include src="../css/templates/footer_scripts.xhtml"/>
    </h:body>
</html>

